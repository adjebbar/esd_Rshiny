## Take the dse-results for AACA and grid them into maps

library(esd)
demo(pca2eof,ask=FALSE)

setwd('data')
files <- list.files(pattern='dse.kss')
print(files)

n <- length(files)

for (i in 1:n) {
  print(files[i])
  load(files[i])
  eval(parse(text=paste('z <- ',substr(files[i],1,nchar(files[i])-8))))
  z <- subset(z,ip=1:4)
  Z <- as.eof.dsensemble.pca(z)
  eoffile <- paste(substr(files[i],1,nchar(files[i])-4),'.eof.rda',sep='')
  print(eoffile)
  save(Z,file=eoffile)
}
setwd('..')
